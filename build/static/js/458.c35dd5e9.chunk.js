"use strict";(self.webpackChunkinstagram=self.webpackChunkinstagram||[]).push([[458],{2458:function(e,r,t){t.r(r),t.d(r,{default:function(){return m}});var n=t(5861),a=t(9439),s=t(7757),u=t.n(s),c=t(2791),o=t(6871),i=t(3504),l=(t(2303),t(8155)),p=t(7606),f=(t(1522),t(6284)),d=t(184);function m(){var e=(0,o.s0)(),r=(0,c.useState)(""),t=(0,a.Z)(r,2),s=t[0],m=t[1],h=(0,c.useState)(""),w=(0,a.Z)(h,2),x=w[0],y=w[1],b=(0,c.useState)(""),g=(0,a.Z)(b,2),v=g[0],Z=g[1],j=(0,c.useState)(""),k=(0,a.Z)(j,2),C=k[0],I=k[1],N=(0,c.useState)(""),O=(0,a.Z)(N,2),P=O[0],S=O[1],E=""===C||""===v,D=function(){var r=(0,n.Z)(u().mark((function r(t){var n,a;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.preventDefault(),r.next=3,(0,p.zl)(s);case 3:if(n=r.sent,console.log("usernameExists",n),n){r.next=25;break}return r.prev=6,r.next=9,f.wC.auth().createUserWithEmailAndPassword(v,C);case 9:return a=r.sent,r.next=12,a.user.updateProfile({displayName:s});case 12:return r.next=14,f.wC.firestore().collection("users").add({userId:a.user.uid,username:s.toLowerCase(),fullName:x,emailAddress:v.toLowerCase(),following:["2"],followers:[],dateCreated:Date.now()});case 14:e(l.h1),r.next=23;break;case 17:r.prev=17,r.t0=r.catch(6),y(""),Z(""),I(""),S(r.t0.message);case 23:r.next=27;break;case 25:m(""),S("That username is already taken, please try another.");case 27:case"end":return r.stop()}}),r,null,[[6,17]])})));return function(e){return r.apply(this,arguments)}}();return(0,c.useEffect)((function(){document.title="Sign Up - Instagram"}),[]),(0,d.jsxs)("div",{className:"container flex justify-center mx-auto max-w-screen-md items-center h-screen",children:[(0,d.jsx)("div",{className:"flex w-3/5 hidden sm:block",children:(0,d.jsx)("img",{src:"/images/iphone-with-profile.jpg",alt:"iPhone with Instagram app"})}),(0,d.jsxs)("div",{className:"flex flex-col w-4/5 sm:w-2/5",children:[(0,d.jsxs)("div",{className:"flex flex-col items-center bg-white p-4 border border-gray-primary mb-4 rounded",children:[(0,d.jsx)("h1",{className:"flex justify-center w-full",children:(0,d.jsx)("img",{src:"/images/logo.png",alt:"Instagram",className:"mt-2 w-6/12 mb-4"})}),P&&(0,d.jsx)("p",{className:"mb-4 text-xs text-red-primary",children:P}),(0,d.jsxs)("form",{onSubmit:D,method:"POST",children:[(0,d.jsx)("input",{"aria-label":"Enter your username",type:"text",placeholder:"Username",className:"text-sm text-gray-base w-full mr-3 py-5 px-4 h-2 border border-gray-primary rounded mb-2",onChange:function(e){var r=e.target;return m(r.value)},value:s}),(0,d.jsx)("input",{"aria-label":"Enter your full name",type:"text",placeholder:"Full name",className:"text-sm text-gray-base w-full mr-3 py-5 px-4 h-2 border border-gray-primary rounded mb-2",onChange:function(e){var r=e.target;return y(r.value)},value:x}),(0,d.jsx)("input",{"aria-label":"Enter your email address",type:"text",placeholder:"Email address",className:"text-sm text-gray-base w-full mr-3 py-5 px-4 h-2 border border-gray-primary rounded mb-2",onChange:function(e){var r=e.target;return Z(r.value)},value:v}),(0,d.jsx)("input",{"aria-label":"Enter your password",type:"password",placeholder:"Password",className:"text-sm text-gray-base w-full mr-3 py-5 px-4 h-2 border border-gray-primary rounded mb-2",onChange:function(e){var r=e.target;return I(r.value)},value:C}),(0,d.jsx)("button",{disabled:E,type:"submit",className:"bg-blue-medium text-white w-full rounded h-8 font-bold\n            ".concat(E&&"opacity-50"),children:"Sign Up"})]})]}),(0,d.jsx)("div",{className:"flex justify-center items-center flex-col w-full bg-white p-4 rounded border border-gray-primary",children:(0,d.jsxs)("p",{className:"text-sm",children:["\xbfHave an account?"," ",(0,d.jsx)(i.rU,{to:l.ym,className:"font-bold text-blue-medium",children:"Login"})]})})]})]})}},7606:function(e,r,t){t.d(r,{zl:function(){return l},dQ:function(){return f},_T:function(){return m},xD:function(){return w},ve:function(){return y},NS:function(){return g},IU:function(){return Z},T6:function(){return k},wP:function(){return I},Gm:function(){return O}});var n=t(3433),a=t(9439),s=t(1413),u=t(5861),c=t(7757),o=t.n(c),i=t(6284);t(6226);function l(e){return p.apply(this,arguments)}function p(){return(p=(0,u.Z)(o().mark((function e(r){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.wC.firestore().collection("users").where("username","==",r).get();case 2:return t=e.sent,e.abrupt("return",t.docs.length>0);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return d.apply(this,arguments)}function d(){return(d=(0,u.Z)(o().mark((function e(r){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.wC.firestore().collection("users").where("username","==",r).get();case 2:return t=e.sent,e.abrupt("return",t.docs.map((function(e){return(0,s.Z)((0,s.Z)({},e.data()),{},{docId:e.id})})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return h.apply(this,arguments)}function h(){return(h=(0,u.Z)(o().mark((function e(r){var t,n,u,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(r);case 2:return t=e.sent,n=(0,a.Z)(t,1),u=n[0],e.next=7,i.wC.firestore().collection("photos").where("userId","==",u.userId).get();case 7:return c=e.sent,e.abrupt("return",c.docs.map((function(e){return(0,s.Z)((0,s.Z)({},e.data()),{},{docId:e.id})})));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e){return x.apply(this,arguments)}function x(){return(x=(0,u.Z)(o().mark((function e(r){var t,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.wC.firestore().collection("users").where("userId","==",r).get();case 2:return t=e.sent,n=t.docs.map((function(e){return(0,s.Z)((0,s.Z)({},e.data()),{},{docId:e.id})})),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e,r){return b.apply(this,arguments)}function b(){return(b=(0,u.Z)(o().mark((function e(r,t){var a,u,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.wC.firestore().collection("users"),a=t.length>0?a.where("userId","not-in",[].concat((0,n.Z)(t),[r])):a.where("userId","!=",r),e.next=4,a.limit(10).get();case 4:return u=e.sent,c=u.docs.map((function(e){return(0,s.Z)((0,s.Z)({},e.data()),{},{docId:e.id})})),e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e,r,t){return v.apply(this,arguments)}function v(){return(v=(0,u.Z)(o().mark((function e(r,t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i.wC.firestore().collection("users").doc(r).update({following:n?(0,i.Ab)(t):(0,i.vr)(t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(e,r){return j.apply(this,arguments)}function j(){return(j=(0,u.Z)(o().mark((function e(r,t){var n,u,c,l,p;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.wC.firestore().collection("users").where("username","==",r).where("following","array-contains",t).get();case 2:return n=e.sent,u=n.docs.map((function(e){return(0,s.Z)((0,s.Z)({},e.data()),{},{docId:e.id})})),c=(0,a.Z)(u,1),l=c[0],p=void 0===l?{}:l,e.abrupt("return",p.userId);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e,r,t){return C.apply(this,arguments)}function C(){return(C=(0,u.Z)(o().mark((function e(r,t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i.wC.firestore().collection("users").doc(r).update({followers:n?(0,i.Ab)(t):(0,i.vr)(t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e,r){return N.apply(this,arguments)}function N(){return N=(0,u.Z)(o().mark((function e(r,t){var n,a,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.wC.firestore().collection("photos").where("userId","in",t).get();case 2:return n=e.sent,a=n.docs.map((function(e){return(0,s.Z)((0,s.Z)({},e.data()),{},{docId:e.id})})),e.next=6,Promise.all(a.map(function(){var e=(0,u.Z)(o().mark((function e(t){var n,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!1,t.likes.includes(r)&&(n=!0),e.next=4,w(t.userId);case 4:return a=e.sent,u=a[0].username,e.abrupt("return",(0,s.Z)((0,s.Z)({username:u},t),{},{userLikedPhoto:n}));case 7:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()));case 6:return c=e.sent,e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)}))),N.apply(this,arguments)}function O(e,r,t,n,a){return P.apply(this,arguments)}function P(){return(P=(0,u.Z)(o().mark((function e(r,t,n,a,s){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(t,a,r);case 2:return e.next=4,k(n,s,r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},1413:function(e,r,t){t.d(r,{Z:function(){return s}});var n=t(4942);function a(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function s(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?a(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}}}]);
//# sourceMappingURL=458.c35dd5e9.chunk.js.map