{"ast":null,"code":"import _toConsumableArray from\"D:/CURSO JS/REACT/instagram/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"D:/CURSO JS/REACT/instagram/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";/* eslint-disable react/require-default-props */ /* eslint-disable react/forbid-prop-types */ /* eslint-disable no-shadow */ /* eslint-disable no-unused-vars */import React,{useState,useContext}from\"react\";import FirebaseContext from\"../../context/firebase\";import UserContext from\"../../context/user\";import{arrayUnion}from\"../../lib/firebase\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function AddComment(_ref){var docId=_ref.docId,comments=_ref.comments,setComments=_ref.setComments,commentInput=_ref.commentInput;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),comment=_useState2[0],setComment=_useState2[1];var _useContext=useContext(FirebaseContext),firebase=_useContext.firebase,FieldValue=_useContext.FieldValue;var _useContext2=useContext(UserContext),displayName=_useContext2.user.displayName;var handleSubmitComment=function handleSubmitComment(e){e.preventDefault();setComments([{displayName:displayName,comment:comment}].concat(_toConsumableArray(comments)));setComment(\"\");// give me a new Array[]\n// put the new comment in there\n// add the old commment\n// then we have a new Array with the new comment and the older comments\nreturn firebase.firestore().collection(\"photos\").doc(docId).update({comments:arrayUnion({displayName:displayName,comment:comment})});};return/*#__PURE__*/_jsx(\"div\",{className:\"border-t border-gray-primary\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"flex justify-between pl-0 pr-5\",method:\"POST\",onSubmit:function onSubmit(event){return comment.length>=1?handleSubmitComment(event):event.preventDefault();},children:[/*#__PURE__*/_jsx(\"input\",{\"aria-label\":\"Add a comment\",autoComplete:\"off\",className:\"rounded-lg text-xs text-gray-base w-full mr-3 py-5 px-4\",type:\"text\",name:\"add-comment\",placeholder:\"Add a comment...\",value:comment,onChange:function onChange(_ref2){var target=_ref2.target;return setComment(target.value);},ref:commentInput}),/*#__PURE__*/_jsx(\"button\",{className:\"text-xs font-bold text-blue-medium \".concat(!comment&&\"opacity-25\"),type:\"button\",disabled:comment.length<1,onClick:handleSubmitComment,children:\"Post\"})]})});}","map":{"version":3,"sources":["D:/CURSO JS/REACT/instagram/src/components/post/add-comment.js"],"names":["React","useState","useContext","FirebaseContext","UserContext","arrayUnion","AddComment","docId","comments","setComments","commentInput","comment","setComment","firebase","FieldValue","displayName","user","handleSubmitComment","e","preventDefault","firestore","collection","doc","update","event","length","target","value"],"mappings":"0OAAA,gD,CACA,4C,CACA,8B,CACA,mCAEA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,UAA1B,KAA4C,OAA5C,CAEA,MAAOC,CAAAA,eAAP,KAA4B,wBAA5B,CACA,MAAOC,CAAAA,WAAP,KAAwB,oBAAxB,CACA,OAASC,UAAT,KAA2B,oBAA3B,C,wFAEA,cAAe,SAASC,CAAAA,UAAT,MAKZ,IAJDC,CAAAA,KAIC,MAJDA,KAIC,CAHDC,QAGC,MAHDA,QAGC,CAFDC,WAEC,MAFDA,WAEC,CADDC,YACC,MADDA,YACC,CACD,cAA8BT,QAAQ,CAAC,EAAD,CAAtC,wCAAOU,OAAP,eAAgBC,UAAhB,eACA,gBAAiCV,UAAU,CAACC,eAAD,CAA3C,CAAQU,QAAR,aAAQA,QAAR,CAAkBC,UAAlB,aAAkBA,UAAlB,CACA,iBAEIZ,UAAU,CAACE,WAAD,CAFd,CACUW,WADV,cACEC,IADF,CACUD,WADV,CAIA,GAAME,CAAAA,mBAAmB,CAAG,QAAtBA,CAAAA,mBAAsB,CAACC,CAAD,CAAO,CACjCA,CAAC,CAACC,cAAF,GACAV,WAAW,EAAE,CAAEM,WAAW,CAAXA,WAAF,CAAeJ,OAAO,CAAPA,OAAf,CAAF,4BAA+BH,QAA/B,GAAX,CACAI,UAAU,CAAC,EAAD,CAAV,CACA;AACA;AACA;AACA;AACA,MAAOC,CAAAA,QAAQ,CACZO,SADI,GAEJC,UAFI,CAEO,QAFP,EAGJC,GAHI,CAGAf,KAHA,EAIJgB,MAJI,CAIG,CAAEf,QAAQ,CAAEH,UAAU,CAAC,CAAEU,WAAW,CAAXA,WAAF,CAAeJ,OAAO,CAAPA,OAAf,CAAD,CAAtB,CAJH,CAAP,CAKD,CAbD,CAcA,mBACE,YAAK,SAAS,CAAC,8BAAf,uBACE,cACE,SAAS,CAAC,gCADZ,CAEE,MAAM,CAAC,MAFT,CAGE,QAAQ,CAAE,kBAACa,KAAD,QACRb,CAAAA,OAAO,CAACc,MAAR,EAAkB,CAAlB,CACIR,mBAAmB,CAACO,KAAD,CADvB,CAEIA,KAAK,CAACL,cAAN,EAHI,EAHZ,wBASE,cACE,aAAW,eADb,CAEE,YAAY,CAAC,KAFf,CAGE,SAAS,CAAC,yDAHZ,CAIE,IAAI,CAAC,MAJP,CAKE,IAAI,CAAC,aALP,CAME,WAAW,CAAC,kBANd,CAOE,KAAK,CAAER,OAPT,CAQE,QAAQ,CAAE,4BAAGe,CAAAA,MAAH,OAAGA,MAAH,OAAgBd,CAAAA,UAAU,CAACc,MAAM,CAACC,KAAR,CAA1B,EARZ,CASE,GAAG,CAAEjB,YATP,EATF,cAoBE,eACE,SAAS,8CACP,CAACC,OAAD,EAAY,YADL,CADX,CAIE,IAAI,CAAC,QAJP,CAKE,QAAQ,CAAEA,OAAO,CAACc,MAAR,CAAiB,CAL7B,CAME,OAAO,CAAER,mBANX,kBApBF,GADF,EADF,CAmCD","sourcesContent":["/* eslint-disable react/require-default-props */\r\n/* eslint-disable react/forbid-prop-types */\r\n/* eslint-disable no-shadow */\r\n/* eslint-disable no-unused-vars */\r\n\r\nimport React, { useState, useContext } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport FirebaseContext from \"../../context/firebase\";\r\nimport UserContext from \"../../context/user\";\r\nimport { arrayUnion } from \"../../lib/firebase\";\r\n\r\nexport default function AddComment({\r\n  docId,\r\n  comments,\r\n  setComments,\r\n  commentInput,\r\n}) {\r\n  const [comment, setComment] = useState(\"\");\r\n  const { firebase, FieldValue } = useContext(FirebaseContext);\r\n  const {\r\n    user: { displayName },\r\n  } = useContext(UserContext);\r\n\r\n  const handleSubmitComment = (e) => {\r\n    e.preventDefault();\r\n    setComments([{ displayName, comment }, ...comments]);\r\n    setComment(\"\");\r\n    // give me a new Array[]\r\n    // put the new comment in there\r\n    // add the old commment\r\n    // then we have a new Array with the new comment and the older comments\r\n    return firebase\r\n      .firestore()\r\n      .collection(\"photos\")\r\n      .doc(docId)\r\n      .update({ comments: arrayUnion({ displayName, comment }) });\r\n  };\r\n  return (\r\n    <div className=\"border-t border-gray-primary\">\r\n      <form\r\n        className=\"flex justify-between pl-0 pr-5\"\r\n        method=\"POST\"\r\n        onSubmit={(event) =>\r\n          comment.length >= 1\r\n            ? handleSubmitComment(event)\r\n            : event.preventDefault()\r\n        }\r\n      >\r\n        <input\r\n          aria-label=\"Add a comment\"\r\n          autoComplete=\"off\"\r\n          className=\"rounded-lg text-xs text-gray-base w-full mr-3 py-5 px-4\"\r\n          type=\"text\"\r\n          name=\"add-comment\"\r\n          placeholder=\"Add a comment...\"\r\n          value={comment}\r\n          onChange={({ target }) => setComment(target.value)}\r\n          ref={commentInput}\r\n        />\r\n        <button\r\n          className={`text-xs font-bold text-blue-medium ${\r\n            !comment && \"opacity-25\"\r\n          }`}\r\n          type=\"button\"\r\n          disabled={comment.length < 1}\r\n          onClick={handleSubmitComment}\r\n        >\r\n          Post\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nAddComment.propTypes = {\r\n  docId: PropTypes.string.isRequired,\r\n  comments: PropTypes.array.isRequired,\r\n  setComments: PropTypes.func.isRequired,\r\n  commentInput: PropTypes.object,\r\n};\r\n"]},"metadata":{},"sourceType":"module"}