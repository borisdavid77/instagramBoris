{"ast":null,"code":"import _asyncToGenerator from\"D:/CURSO JS/REACT/instagram/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/CURSO JS/REACT/instagram/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"D:\\\\CURSO JS\\\\REACT\\\\instagram\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";/* eslint-disable no-unused-vars */import React,{useState,useEffect,useContext}from\"react\";import UserContext from\"../context/user\";import{getUserByUserId,getPhotos}from\"../services/firebase\";export default function usePhotos(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),photos=_useState2[0],setPhotos=_useState2[1];var _useContext=useContext(UserContext),_useContext$user$uid=_useContext.user.uid,userId=_useContext$user$uid===void 0?\"\":_useContext$user$uid;useEffect(function(){function getTimlinePhotos(){return _getTimlinePhotos.apply(this,arguments);}function _getTimlinePhotos(){_getTimlinePhotos=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$getUserByUserI,_yield$getUserByUserI2,following,followedUserPhotos;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getUserByUserId(userId);case 2:_yield$getUserByUserI=_context.sent;_yield$getUserByUserI2=_slicedToArray(_yield$getUserByUserI,1);following=_yield$getUserByUserI2[0].following;followedUserPhotos=[];// do we the user actually follow people ?\nif(!(following.length>0)){_context.next=10;break;}_context.next=9;return getPhotos(userId,following);case 9:followedUserPhotos=_context.sent;case 10:// re-arrange array to be newest photos first by dateCreated\n// followedUserPhotos.sort((a, b) => b.dateCreated - a.dateCreated);\nsetPhotos(followedUserPhotos);case 11:case\"end\":return _context.stop();}}},_callee);}));return _getTimlinePhotos.apply(this,arguments);}getTimlinePhotos();},[userId]);return{photos:photos};}","map":{"version":3,"sources":["D:/CURSO JS/REACT/instagram/src/hooks/use-photos.js"],"names":["React","useState","useEffect","useContext","UserContext","getUserByUserId","getPhotos","usePhotos","photos","setPhotos","user","uid","userId","getTimlinePhotos","following","followedUserPhotos","length"],"mappings":"8VAAA,mCACA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,CAAqCC,UAArC,KAAuD,OAAvD,CACA,MAAOC,CAAAA,WAAP,KAAwB,iBAAxB,CACA,OAASC,eAAT,CAA0BC,SAA1B,KAA2C,sBAA3C,CAEA,cAAe,SAASC,CAAAA,SAAT,EAAqB,CAClC,cAA4BN,QAAQ,EAApC,wCAAOO,MAAP,eAAeC,SAAf,eACA,gBAEIN,UAAU,CAACC,WAAD,CAFd,kCACEM,IADF,CACUC,GADV,CACeC,MADf,+BACwB,EADxB,sBAIAV,SAAS,CAAC,UAAM,SACCW,CAAAA,gBADD,0JACd,uOAEgCR,CAAAA,eAAe,CAACO,MAAD,CAF/C,2GAEWE,SAFX,2BAEWA,SAFX,CAGMC,kBAHN,CAG2B,EAH3B,CAIE;AAJF,KAKMD,SAAS,CAACE,MAAV,CAAmB,CALzB,iDAM+BV,CAAAA,SAAS,CAACM,MAAD,CAASE,SAAT,CANxC,QAMIC,kBANJ,uBAQE;AACA;AACAN,SAAS,CAACM,kBAAD,CAAT,CAVF,uDADc,mDAadF,gBAAgB,GACjB,CAdQ,CAcN,CAACD,MAAD,CAdM,CAAT,CAeA,MAAO,CAAEJ,MAAM,CAANA,MAAF,CAAP,CACD","sourcesContent":["/* eslint-disable no-unused-vars */\r\nimport React, { useState, useEffect, useContext } from \"react\";\r\nimport UserContext from \"../context/user\";\r\nimport { getUserByUserId, getPhotos } from \"../services/firebase\";\r\n\r\nexport default function usePhotos() {\r\n  const [photos, setPhotos] = useState();\r\n  const {\r\n    user: { uid: userId = \"\" },\r\n  } = useContext(UserContext);\r\n\r\n  useEffect(() => {\r\n    async function getTimlinePhotos() {\r\n      // example [2,3,4] 2 begin raphael\r\n      const [{ following }] = await getUserByUserId(userId);\r\n      let followedUserPhotos = [];\r\n      // do we the user actually follow people ?\r\n      if (following.length > 0) {\r\n        followedUserPhotos = await getPhotos(userId, following);\r\n      }\r\n      // re-arrange array to be newest photos first by dateCreated\r\n      // followedUserPhotos.sort((a, b) => b.dateCreated - a.dateCreated);\r\n      setPhotos(followedUserPhotos);\r\n    }\r\n    getTimlinePhotos();\r\n  }, [userId]);\r\n  return { photos };\r\n}\r\n"]},"metadata":{},"sourceType":"module"}