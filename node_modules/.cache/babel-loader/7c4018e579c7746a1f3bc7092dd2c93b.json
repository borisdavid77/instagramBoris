{"ast":null,"code":"import _asyncToGenerator from\"D:/CURSO JS/REACT/instagram/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/CURSO JS/REACT/instagram/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"D:\\\\CURSO JS\\\\REACT\\\\instagram\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";/* eslint-disable no-shadow */ /* eslint-disable react/forbid-prop-types */ /* eslint-disable jsx-a11y/img-redundant-alt */ /* eslint-disable no-unused-vars */import React,{useEffect,useState}from\"react\";import Skeleton from\"react-loading-skeleton\";import useUser from\"../../hooks/use-user\";import{isUserFollowingProfile,toggleFollow}from\"../../services/firebase\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function Header(_ref){var photosCount=_ref.photosCount,followerCount=_ref.followerCount,setFollowerCount=_ref.setFollowerCount,_ref$profile=_ref.profile,profileDocId=_ref$profile.docId,profileUserId=_ref$profile.userId,fullName=_ref$profile.fullName,_ref$profile$followin=_ref$profile.following,following=_ref$profile$followin===void 0?[]:_ref$profile$followin,_ref$profile$follower=_ref$profile.followers,followers=_ref$profile$follower===void 0?[]:_ref$profile$follower,profileUsername=_ref$profile.username;var _useUser=useUser(),user=_useUser.user;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),isFollowingProfile=_useState2[0],setIsFollowingProfile=_useState2[1];var activeBtnFollow=(user===null||user===void 0?void 0:user.username)&&(user===null||user===void 0?void 0:user.username)!==profileUsername;var handleToggleFollow=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setIsFollowingProfile(function(isFollowingProfile){return!isFollowingProfile;});console.log(\"isFollowingProfile\",isFollowingProfile);setFollowerCount({followerCount:isFollowingProfile?followerCount-1:followerCount+1});_context.next=5;return toggleFollow(isFollowingProfile,user.docId,profileDocId,profileUserId,user.userId);case 5:case\"end\":return _context.stop();}}},_callee);}));return function handleToggleFollow(){return _ref2.apply(this,arguments);};}();useEffect(function(){var isLoggedInUserFollowingProfile=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var isFollowing;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return isUserFollowingProfile(user.username,profileUserId);case 2:isFollowing=_context2.sent;setIsFollowingProfile(isFollowing);case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function isLoggedInUserFollowingProfile(){return _ref3.apply(this,arguments);};}();if(user.username&&profileUserId){isLoggedInUserFollowingProfile();}},[user.username,profileUserId]);return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4 justify-between mx-auto max-w-screen-lg\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"container flex justify-center md:pr-16\",children:user.username&&/*#__PURE__*/_jsx(\"img\",{className:\"flex rounded-full h-24 w-24 md:h-40 md:w-40 border-4 border-red-primary p-1\",alt:\"\".concat(profileUsername,\" profile picture\"),src:\"/images/avatars/\".concat(profileUsername,\".jpg\"),onError:function onError(e){e.target.src=\"/images/avatars/default.png\";}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center flex-col col-span-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"container flex items-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xl mr-4\",children:profileUsername}),activeBtnFollow&&isFollowingProfile===null?/*#__PURE__*/_jsx(Skeleton,{count:1,width:80,height:32}):activeBtnFollow&&/*#__PURE__*/_jsx(\"button\",{className:\"bg-blue-medium font-semibold text-sm rounded text-white w-20 h-8 ml-6\",type:\"button\",onClick:handleToggleFollow,onKeyDown:function onKeyDown(event){if(event.key===\"Enter\"){handleToggleFollow();}},children:isFollowingProfile?\"Unfollow\":\"Follow\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"container flex items-center mt-2\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-lg font-semibold mr-4\",children:fullName})}),/*#__PURE__*/_jsx(\"div\",{className:\"container flex items-center mt-3 mb-4\",children:!followers||!following?/*#__PURE__*/_jsx(Skeleton,{count:1,width:677,height:24}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"p\",{className:\"mr-10\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold\",children:photosCount}),\" posts\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"mr-10\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold\",children:followerCount}),followerCount===1?\" follower\":\" followers\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"mr-10\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold\",children:following.length}),\" \",\"following\"]})]})})]})]})});}","map":{"version":3,"sources":["D:/CURSO JS/REACT/instagram/src/components/profile/header.js"],"names":["React","useEffect","useState","Skeleton","useUser","isUserFollowingProfile","toggleFollow","Header","photosCount","followerCount","setFollowerCount","profile","profileDocId","docId","profileUserId","userId","fullName","following","followers","profileUsername","username","user","isFollowingProfile","setIsFollowingProfile","activeBtnFollow","handleToggleFollow","console","log","isLoggedInUserFollowingProfile","isFollowing","e","target","src","event","key","length"],"mappings":"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","sourcesContent":["/* eslint-disable no-shadow */\r\n/* eslint-disable react/forbid-prop-types */\r\n/* eslint-disable jsx-a11y/img-redundant-alt */\r\n/* eslint-disable no-unused-vars */\r\nimport React, { useEffect, useState } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport Skeleton from \"react-loading-skeleton\";\r\nimport useUser from \"../../hooks/use-user\";\r\nimport { isUserFollowingProfile, toggleFollow } from \"../../services/firebase\";\r\n\r\nexport default function Header({\r\n  photosCount,\r\n  followerCount,\r\n  setFollowerCount,\r\n  profile: {\r\n    docId: profileDocId,\r\n    userId: profileUserId,\r\n    fullName,\r\n    following = [],\r\n    followers = [],\r\n    username: profileUsername,\r\n  },\r\n}) {\r\n  const { user } = useUser();\r\n  const [isFollowingProfile, setIsFollowingProfile] = useState(null);\r\n  const activeBtnFollow = user?.username && user?.username !== profileUsername;\r\n\r\n  const handleToggleFollow = async () => {\r\n    setIsFollowingProfile((isFollowingProfile) => !isFollowingProfile);\r\n    console.log(\"isFollowingProfile\", isFollowingProfile);\r\n    setFollowerCount({\r\n      followerCount: isFollowingProfile ? followerCount - 1 : followerCount + 1,\r\n    });\r\n    await toggleFollow(\r\n      isFollowingProfile,\r\n      user.docId,\r\n      profileDocId,\r\n      profileUserId,\r\n      user.userId\r\n    );\r\n  };\r\n\r\n  useEffect(() => {\r\n    const isLoggedInUserFollowingProfile = async () => {\r\n      const isFollowing = await isUserFollowingProfile(\r\n        user.username,\r\n        profileUserId\r\n      );\r\n      setIsFollowingProfile(isFollowing);\r\n    };\r\n    if (user.username && profileUserId) {\r\n      isLoggedInUserFollowingProfile();\r\n    }\r\n  }, [user.username, profileUserId]);\r\n\r\n  return (\r\n    <div className=\"flex items-center justify-center\">\r\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 justify-between mx-auto max-w-screen-lg\">\r\n        <div className=\"container flex justify-center md:pr-16\">\r\n          {user.username && (\r\n            <img\r\n              className=\"flex rounded-full h-24 w-24 md:h-40 md:w-40 border-4 border-red-primary p-1\"\r\n              alt={`${profileUsername} profile picture`}\r\n              src={`/images/avatars/${profileUsername}.jpg`}\r\n              onError={(e) => {\r\n                e.target.src = `/images/avatars/default.png`;\r\n              }}\r\n            />\r\n          )}\r\n        </div>\r\n        <div className=\"flex items-center justify-center flex-col col-span-2\">\r\n          <div className=\"container flex items-center\">\r\n            <p className=\"text-xl mr-4\">{profileUsername}</p>\r\n            {activeBtnFollow && isFollowingProfile === null ? (\r\n              <Skeleton count={1} width={80} height={32} />\r\n            ) : (\r\n              activeBtnFollow && (\r\n                <button\r\n                  className=\"bg-blue-medium font-semibold text-sm rounded text-white w-20 h-8 ml-6\"\r\n                  type=\"button\"\r\n                  onClick={handleToggleFollow}\r\n                  onKeyDown={(event) => {\r\n                    if (event.key === \"Enter\") {\r\n                      handleToggleFollow();\r\n                    }\r\n                  }}\r\n                >\r\n                  {isFollowingProfile ? \"Unfollow\" : \"Follow\"}\r\n                </button>\r\n              )\r\n            )}\r\n          </div>\r\n          <div className=\"container flex items-center mt-2\">\r\n            <p className=\"text-lg font-semibold mr-4\">{fullName}</p>\r\n          </div>\r\n          <div className=\"container flex items-center mt-3 mb-4\">\r\n            {!followers || !following ? (\r\n              <Skeleton count={1} width={677} height={24} />\r\n            ) : (\r\n              <>\r\n                <p className=\"mr-10\">\r\n                  <span className=\"font-semibold\">{photosCount}</span> posts\r\n                </p>\r\n                <p className=\"mr-10\">\r\n                  <span className=\"font-semibold\">{followerCount}</span>\r\n                  {followerCount === 1 ? ` follower` : ` followers`}\r\n                </p>\r\n                <p className=\"mr-10\">\r\n                  <span className=\"font-semibold\">{following.length}</span>{\" \"}\r\n                  following\r\n                </p>\r\n              </>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\nHeader.propTypes = {\r\n  photosCount: PropTypes.number.isRequired,\r\n  followerCount: PropTypes.number.isRequired,\r\n  setFollowerCount: PropTypes.number.isRequired,\r\n  profile: PropTypes.shape({\r\n    docId: PropTypes.string,\r\n    userId: PropTypes.string,\r\n    following: PropTypes.array,\r\n    followers: PropTypes.array,\r\n    fullName: PropTypes.string,\r\n    username: PropTypes.array,\r\n  }).isRequired,\r\n};\r\n"]},"metadata":{},"sourceType":"module"}