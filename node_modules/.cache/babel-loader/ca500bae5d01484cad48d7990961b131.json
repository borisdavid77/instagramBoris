{"ast":null,"code":"import _asyncToGenerator from\"D:/CURSO JS/REACT/instagram/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/CURSO JS/REACT/instagram/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"D:\\\\CURSO JS\\\\REACT\\\\instagram\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";/* eslint-disable no-shadow */ /* eslint-disable no-unused-vars */import React,{useState,useContext}from\"react\";import FirebaseContext from\"../../context/firebase\";import UserContext from\"../../context/user\";import{firebase,arrayUnion,arrayRemove}from\"../../lib/firebase\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function Actions(_ref){var docId=_ref.docId,totalLikes=_ref.totalLikes,likedPhoto=_ref.likedPhoto,handleFocus=_ref.handleFocus;var _useContext=useContext(UserContext),_useContext$user$uid=_useContext.user.uid,userId=_useContext$user$uid===void 0?\"\":_useContext$user$uid;var _useState=useState(likedPhoto),_useState2=_slicedToArray(_useState,2),toggleLiked=_useState2[0],setToggleLiked=_useState2[1];var _useState3=useState(totalLikes),_useState4=_slicedToArray(_useState3,2),likes=_useState4[0],setLikes=_useState4[1];var handleToggleLiked=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setToggleLiked(function(toggleLiked){return!toggleLiked;});_context.next=3;return firebase.firestore().collection(\"photos\").doc(docId).update({likes:toggleLiked?arrayRemove(userId):arrayUnion(userId)});case 3:setLikes(function(likes){return toggleLiked?likes-1:likes+1;});case 4:case\"end\":return _context.stop();}}},_callee);}));return function handleToggleLiked(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-between p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex\",children:[/*#__PURE__*/_jsx(\"svg\",{onClick:handleToggleLiked,onKeyDown:function onKeyDown(event){if(event.key===\"Enter\"){handleToggleLiked();}},xmlns:\"http://www.w3.org/2000/svg\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",tabIndex:0,className:\"w-8 mr-4 select-none cursor-pointer focus:outline-none \".concat(toggleLiked?\"fill-red text-red-primary\":\"text-black-light\"),children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z\"})}),/*#__PURE__*/_jsx(\"svg\",{onClick:handleFocus,onKeyDown:function onKeyDown(event){if(event.key===\"Enter\"){handleFocus();}},className:\"w-8 text-black-light select-none cursor-pointer focus:outline-none\",xmlns:\"http://www.w3.org/2000/svg\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",tabIndex:0,children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"p-4 py-0\",children:/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold\",children:likes===1?\"\".concat(likes,\" like\"):\"\".concat(likes,\" likes\")})})]});}","map":{"version":3,"sources":["D:/CURSO JS/REACT/instagram/src/components/post/actions.js"],"names":["React","useState","useContext","FirebaseContext","UserContext","firebase","arrayUnion","arrayRemove","Actions","docId","totalLikes","likedPhoto","handleFocus","user","uid","userId","toggleLiked","setToggleLiked","likes","setLikes","handleToggleLiked","firestore","collection","doc","update","event","key"],"mappings":"8VAAA,8B,CACA,mCAEA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,UAA1B,KAA4C,OAA5C,CAEA,MAAOC,CAAAA,eAAP,KAA4B,wBAA5B,CACA,MAAOC,CAAAA,WAAP,KAAwB,oBAAxB,CACA,OAASC,QAAT,CAAmBC,UAAnB,CAA+BC,WAA/B,KAAkD,oBAAlD,C,6IAEA,cAAe,SAASC,CAAAA,OAAT,MAKZ,IAJDC,CAAAA,KAIC,MAJDA,KAIC,CAHDC,UAGC,MAHDA,UAGC,CAFDC,UAEC,MAFDA,UAEC,CADDC,WACC,MADDA,WACC,CACD,gBAEIV,UAAU,CAACE,WAAD,CAFd,kCACES,IADF,CACUC,GADV,CACeC,MADf,+BACwB,EADxB,sBAGA,cAAsCd,QAAQ,CAACU,UAAD,CAA9C,wCAAOK,WAAP,eAAoBC,cAApB,eACA,eAA0BhB,QAAQ,CAACS,UAAD,CAAlC,yCAAOQ,KAAP,eAAcC,QAAd,eACA,GAAMC,CAAAA,iBAAiB,2FAAG,mIACxBH,cAAc,CAAC,SAACD,WAAD,QAAiB,CAACA,WAAlB,EAAD,CAAd,CADwB,sBAGlBX,CAAAA,QAAQ,CACXgB,SADG,GAEHC,UAFG,CAEQ,QAFR,EAGHC,GAHG,CAGCd,KAHD,EAIHe,MAJG,CAII,CACNN,KAAK,CAAEF,WAAW,CAAGT,WAAW,CAACQ,MAAD,CAAd,CAAyBT,UAAU,CAACS,MAAD,CAD/C,CAJJ,CAHkB,QAWxBI,QAAQ,CAAC,SAACD,KAAD,QAAYF,CAAAA,WAAW,CAAGE,KAAK,CAAG,CAAX,CAAeA,KAAK,CAAG,CAA9C,EAAD,CAAR,CAXwB,sDAAH,kBAAjBE,CAAAA,iBAAiB,2CAAvB,CAaA,mBACE,wCACE,YAAK,SAAS,CAAC,0BAAf,uBACE,aAAK,SAAS,CAAC,MAAf,wBACE,YACE,OAAO,CAAEA,iBADX,CAEE,SAAS,CAAE,mBAACK,KAAD,CAAW,CACpB,GAAIA,KAAK,CAACC,GAAN,GAAc,OAAlB,CAA2B,CACzBN,iBAAiB,GAClB,CACF,CANH,CAOE,KAAK,CAAC,4BAPR,CAQE,IAAI,CAAC,MARP,CASE,OAAO,CAAC,WATV,CAUE,MAAM,CAAC,cAVT,CAWE,QAAQ,CAAE,CAXZ,CAYE,SAAS,kEACPJ,WAAW,CAAG,2BAAH,CAAiC,kBADrC,CAZX,uBAgBE,aACE,aAAa,CAAC,OADhB,CAEE,cAAc,CAAC,OAFjB,CAGE,WAAW,CAAE,CAHf,CAIE,CAAC,CAAC,6HAJJ,EAhBF,EADF,cAwBE,YACE,OAAO,CAAEJ,WADX,CAEE,SAAS,CAAE,mBAACa,KAAD,CAAW,CACpB,GAAIA,KAAK,CAACC,GAAN,GAAc,OAAlB,CAA2B,CACzBd,WAAW,GACZ,CACF,CANH,CAOE,SAAS,CAAC,oEAPZ,CAQE,KAAK,CAAC,4BARR,CASE,IAAI,CAAC,MATP,CAUE,OAAO,CAAC,WAVV,CAWE,MAAM,CAAC,cAXT,CAYE,QAAQ,CAAE,CAZZ,uBAcE,aACE,aAAa,CAAC,OADhB,CAEE,cAAc,CAAC,OAFjB,CAGE,WAAW,CAAE,CAHf,CAIE,CAAC,CAAC,+JAJJ,EAdF,EAxBF,GADF,EADF,cAiDE,YAAK,SAAS,CAAC,UAAf,uBACE,UAAG,SAAS,CAAC,eAAb,UACGM,KAAK,GAAK,CAAV,WAAiBA,KAAjB,oBAAmCA,KAAnC,UADH,EADF,EAjDF,GADF,CAyDD","sourcesContent":["/* eslint-disable no-shadow */\r\n/* eslint-disable no-unused-vars */\r\n\r\nimport React, { useState, useContext } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport FirebaseContext from \"../../context/firebase\";\r\nimport UserContext from \"../../context/user\";\r\nimport { firebase, arrayUnion, arrayRemove } from \"../../lib/firebase\";\r\n\r\nexport default function Actions({\r\n  docId,\r\n  totalLikes,\r\n  likedPhoto,\r\n  handleFocus,\r\n}) {\r\n  const {\r\n    user: { uid: userId = \"\" },\r\n  } = useContext(UserContext);\r\n  const [toggleLiked, setToggleLiked] = useState(likedPhoto);\r\n  const [likes, setLikes] = useState(totalLikes);\r\n  const handleToggleLiked = async () => {\r\n    setToggleLiked((toggleLiked) => !toggleLiked);\r\n\r\n    await firebase\r\n      .firestore()\r\n      .collection(\"photos\")\r\n      .doc(docId)\r\n      .update({\r\n        likes: toggleLiked ? arrayRemove(userId) : arrayUnion(userId),\r\n      });\r\n\r\n    setLikes((likes) => (toggleLiked ? likes - 1 : likes + 1));\r\n  };\r\n  return (\r\n    <>\r\n      <div className=\"flex justify-between p-4\">\r\n        <div className=\"flex\">\r\n          <svg\r\n            onClick={handleToggleLiked}\r\n            onKeyDown={(event) => {\r\n              if (event.key === \"Enter\") {\r\n                handleToggleLiked();\r\n              }\r\n            }}\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            fill=\"none\"\r\n            viewBox=\"0 0 24 24\"\r\n            stroke=\"currentColor\"\r\n            tabIndex={0}\r\n            className={`w-8 mr-4 select-none cursor-pointer focus:outline-none ${\r\n              toggleLiked ? \"fill-red text-red-primary\" : \"text-black-light\"\r\n            }`}\r\n          >\r\n            <path\r\n              strokeLinecap=\"round\"\r\n              strokeLinejoin=\"round\"\r\n              strokeWidth={2}\r\n              d=\"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z\"\r\n            />\r\n          </svg>\r\n          <svg\r\n            onClick={handleFocus}\r\n            onKeyDown={(event) => {\r\n              if (event.key === \"Enter\") {\r\n                handleFocus();\r\n              }\r\n            }}\r\n            className=\"w-8 text-black-light select-none cursor-pointer focus:outline-none\"\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            fill=\"none\"\r\n            viewBox=\"0 0 24 24\"\r\n            stroke=\"currentColor\"\r\n            tabIndex={0}\r\n          >\r\n            <path\r\n              strokeLinecap=\"round\"\r\n              strokeLinejoin=\"round\"\r\n              strokeWidth={2}\r\n              d=\"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z\"\r\n            />\r\n          </svg>\r\n        </div>\r\n      </div>\r\n      <div className=\"p-4 py-0\">\r\n        <p className=\"font-semibold\">\r\n          {likes === 1 ? `${likes} like` : `${likes} likes`}\r\n        </p>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\nActions.propTypes = {\r\n  docId: PropTypes.string.isRequired,\r\n  totalLikes: PropTypes.number.isRequired,\r\n  likedPhoto: PropTypes.string.isRequired,\r\n  handleFocus: PropTypes.func.isRequired,\r\n};\r\n"]},"metadata":{},"sourceType":"module"}