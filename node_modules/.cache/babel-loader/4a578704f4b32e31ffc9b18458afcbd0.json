{"ast":null,"code":"/* eslint-disable import/prefer-default-export */\n\n/* eslint-disable no-unused-vars */\nimport { firebase } from \"../lib/firebase\";\nimport \"firebase/compat/firestore\";\nexport async function doesUsernameExists(username) {\n  const result = await firebase.firestore().collection(\"users\").where(\"username\", \"==\", username).get();\n  return result.docs.length > 0;\n} // get user from the firestore where userId === userId (passed from the auth)\n\nexport async function getUserByUserId(userId) {\n  const result = await firebase.firestore().collection(\"users\").where(\"userId\", \"==\", userId).get();\n  const user = result.docs.map(item => ({ ...item.data(),\n    docId: item.id\n  }));\n  return user;\n} // check all conditions before limit results\n\nexport async function getSuggestedProfiles(userId, following) {\n  /*\r\n  let query = firebase.firestore().collection(\"users\");\r\n    if (following.length > 0) {\r\n    query = query.where(\"userId\", \"not-in\", [...following, userId]);\r\n  } else {\r\n    query = query.where(\"userId\", \"!=\", userId);\r\n  }\r\n  const result = await query.limit(10).get();\r\n    const profiles = result.docs.map((user) => ({\r\n    ...user.data(),\r\n    docId: user.id,\r\n  }));\r\n    return profiles;\r\n  */\n  const result = await firebase.firestore().collection(\"users\").limit(10).get();\n  return result.docs.map(user => ({ ...user.data(),\n    docId: user.id\n  })).filter(profile => profile.userId !== userId && !following.includes(profile.userId));\n}\nexport async function updateLoggedInUserFollowing(loggedInUserDocId, profileId) {\n  return profileId;\n}\nexport async function updateFollowerdUserFollowers(spDocId, userId) {\n  return userId;\n}","map":{"version":3,"sources":["D:/CURSO JS/REACT/instagram/src/services/firebase.js"],"names":["firebase","doesUsernameExists","username","result","firestore","collection","where","get","docs","length","getUserByUserId","userId","user","map","item","data","docId","id","getSuggestedProfiles","following","limit","filter","profile","includes","updateLoggedInUserFollowing","loggedInUserDocId","profileId","updateFollowerdUserFollowers","spDocId"],"mappings":"AAAA;;AACA;AACA,SAASA,QAAT,QAAyB,iBAAzB;AACA,OAAO,2BAAP;AAEA,OAAO,eAAeC,kBAAf,CAAkCC,QAAlC,EAA4C;AACjD,QAAMC,MAAM,GAAG,MAAMH,QAAQ,CAC1BI,SADkB,GAElBC,UAFkB,CAEP,OAFO,EAGlBC,KAHkB,CAGZ,UAHY,EAGA,IAHA,EAGMJ,QAHN,EAIlBK,GAJkB,EAArB;AAMA,SAAOJ,MAAM,CAACK,IAAP,CAAYC,MAAZ,GAAqB,CAA5B;AACD,C,CACD;;AACA,OAAO,eAAeC,eAAf,CAA+BC,MAA/B,EAAuC;AAC5C,QAAMR,MAAM,GAAG,MAAMH,QAAQ,CAC1BI,SADkB,GAElBC,UAFkB,CAEP,OAFO,EAGlBC,KAHkB,CAGZ,QAHY,EAGF,IAHE,EAGIK,MAHJ,EAIlBJ,GAJkB,EAArB;AAKA,QAAMK,IAAI,GAAGT,MAAM,CAACK,IAAP,CAAYK,GAAZ,CAAiBC,IAAD,KAAW,EACtC,GAAGA,IAAI,CAACC,IAAL,EADmC;AAEtCC,IAAAA,KAAK,EAAEF,IAAI,CAACG;AAF0B,GAAX,CAAhB,CAAb;AAKA,SAAOL,IAAP;AACD,C,CAED;;AACA,OAAO,eAAeM,oBAAf,CAAoCP,MAApC,EAA4CQ,SAA5C,EAAuD;AAC5D;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAIE,QAAMhB,MAAM,GAAG,MAAMH,QAAQ,CAACI,SAAT,GAAqBC,UAArB,CAAgC,OAAhC,EAAyCe,KAAzC,CAA+C,EAA/C,EAAmDb,GAAnD,EAArB;AACA,SAAOJ,MAAM,CAACK,IAAP,CACJK,GADI,CACCD,IAAD,KAAW,EACd,GAAGA,IAAI,CAACG,IAAL,EADW;AAEdC,IAAAA,KAAK,EAAEJ,IAAI,CAACK;AAFE,GAAX,CADA,EAKJI,MALI,CAMFC,OAAD,IACEA,OAAO,CAACX,MAAR,KAAmBA,MAAnB,IAA6B,CAACQ,SAAS,CAACI,QAAV,CAAmBD,OAAO,CAACX,MAA3B,CAP7B,CAAP;AASD;AAED,OAAO,eAAea,2BAAf,CACLC,iBADK,EAELC,SAFK,EAGL;AACA,SAAOA,SAAP;AACD;AACD,OAAO,eAAeC,4BAAf,CAA4CC,OAA5C,EAAqDjB,MAArD,EAA6D;AAClE,SAAOA,MAAP;AACD","sourcesContent":["/* eslint-disable import/prefer-default-export */\r\n/* eslint-disable no-unused-vars */\r\nimport { firebase } from \"../lib/firebase\";\r\nimport \"firebase/compat/firestore\";\r\n\r\nexport async function doesUsernameExists(username) {\r\n  const result = await firebase\r\n    .firestore()\r\n    .collection(\"users\")\r\n    .where(\"username\", \"==\", username)\r\n    .get();\r\n\r\n  return result.docs.length > 0;\r\n}\r\n// get user from the firestore where userId === userId (passed from the auth)\r\nexport async function getUserByUserId(userId) {\r\n  const result = await firebase\r\n    .firestore()\r\n    .collection(\"users\")\r\n    .where(\"userId\", \"==\", userId)\r\n    .get();\r\n  const user = result.docs.map((item) => ({\r\n    ...item.data(),\r\n    docId: item.id,\r\n  }));\r\n\r\n  return user;\r\n}\r\n\r\n// check all conditions before limit results\r\nexport async function getSuggestedProfiles(userId, following) {\r\n  /*\r\n  let query = firebase.firestore().collection(\"users\");\r\n\r\n  if (following.length > 0) {\r\n    query = query.where(\"userId\", \"not-in\", [...following, userId]);\r\n  } else {\r\n    query = query.where(\"userId\", \"!=\", userId);\r\n  }\r\n  const result = await query.limit(10).get();\r\n\r\n  const profiles = result.docs.map((user) => ({\r\n    ...user.data(),\r\n    docId: user.id,\r\n  }));\r\n\r\n  return profiles;\r\n  */\r\n  const result = await firebase.firestore().collection(\"users\").limit(10).get();\r\n  return result.docs\r\n    .map((user) => ({\r\n      ...user.data(),\r\n      docId: user.id,\r\n    }))\r\n    .filter(\r\n      (profile) =>\r\n        profile.userId !== userId && !following.includes(profile.userId)\r\n    );\r\n}\r\n\r\nexport async function updateLoggedInUserFollowing(\r\n  loggedInUserDocId,\r\n  profileId\r\n) {\r\n  return profileId;\r\n}\r\nexport async function updateFollowerdUserFollowers(spDocId, userId) {\r\n  return userId;\r\n}\r\n"]},"metadata":{},"sourceType":"module"}