{"ast":null,"code":"var _s = $RefreshSig$();\n\n/* eslint-disable react-hooks/exhaustive-deps */\n\n/* eslint-disable no-unused-vars */\nimport { useState, useEffect } from \"react\";\nimport { firebase } from \"../lib/firebase\";\nexport default function useAuthListener() {\n  _s();\n\n  const {\n    user,\n    setUser\n  } = useState(JSON.parse(localStorage.getItem(\"authUser\"))); // const { firebase } = useContext(FirebaseContext);\n\n  useEffect(() => {\n    const listener = firebase.auth().onAuthStateChanged(authUser => {\n      // we have user\n      if (authUser) {\n        localStorage.setItem(\"authUser\", JSON.stringify(authUser));\n        setUser(authUser);\n      } else {\n        // we don't have an autUser, therefore clear the localStorage\n        localStorage.removeItem(\"authUser\");\n        setUser(null);\n      }\n    });\n    return () => listener();\n  }, [firebase]);\n  return {\n    user\n  };\n}\n\n_s(useAuthListener, \"WcJ1qIOzA9XmYGkqpiSKYbbTI1I=\");","map":{"version":3,"sources":["D:/CURSO JS/REACT/instagram/src/hooks/use-auth-listener.js"],"names":["useState","useEffect","firebase","useAuthListener","user","setUser","JSON","parse","localStorage","getItem","listener","auth","onAuthStateChanged","authUser","setItem","stringify","removeItem"],"mappings":";;AAAA;;AACA;AACA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,SAASC,QAAT,QAAyB,iBAAzB;AAEA,eAAe,SAASC,eAAT,GAA2B;AAAA;;AACxC,QAAM;AAAEC,IAAAA,IAAF;AAAQC,IAAAA;AAAR,MAAoBL,QAAQ,CAChCM,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAX,CADgC,CAAlC,CADwC,CAKxC;;AAEAR,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMS,QAAQ,GAAGR,QAAQ,CAACS,IAAT,GAAgBC,kBAAhB,CAAoCC,QAAD,IAAc;AAChE;AACA,UAAIA,QAAJ,EAAc;AACZL,QAAAA,YAAY,CAACM,OAAb,CAAqB,UAArB,EAAiCR,IAAI,CAACS,SAAL,CAAeF,QAAf,CAAjC;AACAR,QAAAA,OAAO,CAACQ,QAAD,CAAP;AACD,OAHD,MAGO;AACL;AACAL,QAAAA,YAAY,CAACQ,UAAb,CAAwB,UAAxB;AACAX,QAAAA,OAAO,CAAC,IAAD,CAAP;AACD;AACF,KAVgB,CAAjB;AAWA,WAAO,MAAMK,QAAQ,EAArB;AACD,GAbQ,EAaN,CAACR,QAAD,CAbM,CAAT;AAeA,SAAO;AAAEE,IAAAA;AAAF,GAAP;AACD;;GAvBuBD,e","sourcesContent":["/* eslint-disable react-hooks/exhaustive-deps */\r\n/* eslint-disable no-unused-vars */\r\nimport { useState, useEffect } from \"react\";\r\nimport { firebase } from \"../lib/firebase\";\r\n\r\nexport default function useAuthListener() {\r\n  const { user, setUser } = useState(\r\n    JSON.parse(localStorage.getItem(\"authUser\"))\r\n  );\r\n\r\n  // const { firebase } = useContext(FirebaseContext);\r\n\r\n  useEffect(() => {\r\n    const listener = firebase.auth().onAuthStateChanged((authUser) => {\r\n      // we have user\r\n      if (authUser) {\r\n        localStorage.setItem(\"authUser\", JSON.stringify(authUser));\r\n        setUser(authUser);\r\n      } else {\r\n        // we don't have an autUser, therefore clear the localStorage\r\n        localStorage.removeItem(\"authUser\");\r\n        setUser(null);\r\n      }\r\n    });\r\n    return () => listener();\r\n  }, [firebase]);\r\n\r\n  return { user };\r\n}\r\n"]},"metadata":{},"sourceType":"module"}