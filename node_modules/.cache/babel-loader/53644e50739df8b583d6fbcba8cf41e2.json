{"ast":null,"code":"import _slicedToArray from\"D:/CURSO JS/REACT/instagram/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";/* eslint-disable react-hooks/exhaustive-deps */ /* eslint-disable no-unused-vars */import{useState,useEffect,useContext}from\"react\";import{firebase}from\"../lib/firebase\";export default function useAuthListener(){var _useState=useState(JSON.parse(localStorage.getItem(\"authUser\"))),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];useEffect(function(){var listener=firebase.auth().onAuthStateChanged(function(authUser){if(authUser){// we have a user...therefore we can store the user in localstorage\nlocalStorage.setItem(\"authUser\",JSON.stringify(authUser));setUser(authUser);}else{// we don't have an authUser, therefore clear the localstorage\nlocalStorage.removeItem(\"authUser\");setUser(null);}});return function(){return listener();};},[firebase]);return{user:user};}","map":{"version":3,"sources":["D:/CURSO JS/REACT/instagram/src/hooks/use-auth-listener.js"],"names":["useState","useEffect","useContext","firebase","useAuthListener","JSON","parse","localStorage","getItem","user","setUser","listener","auth","onAuthStateChanged","authUser","setItem","stringify","removeItem"],"mappings":"iHAAA,gD,CACA,mCACA,OAASA,QAAT,CAAmBC,SAAnB,CAA8BC,UAA9B,KAAgD,OAAhD,CACA,OAASC,QAAT,KAAyB,iBAAzB,CAEA,cAAe,SAASC,CAAAA,eAAT,EAA2B,CACxC,cAAwBJ,QAAQ,CAC9BK,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAX,CAD8B,CAAhC,wCAAOC,IAAP,eAAaC,OAAb,eAIAT,SAAS,CAAC,UAAM,CACd,GAAMU,CAAAA,QAAQ,CAAGR,QAAQ,CAACS,IAAT,GAAgBC,kBAAhB,CAAmC,SAACC,QAAD,CAAc,CAChE,GAAIA,QAAJ,CAAc,CACZ;AACAP,YAAY,CAACQ,OAAb,CAAqB,UAArB,CAAiCV,IAAI,CAACW,SAAL,CAAeF,QAAf,CAAjC,EACAJ,OAAO,CAACI,QAAD,CAAP,CACD,CAJD,IAIO,CACL;AACAP,YAAY,CAACU,UAAb,CAAwB,UAAxB,EACAP,OAAO,CAAC,IAAD,CAAP,CACD,CACF,CAVgB,CAAjB,CAYA,MAAO,kBAAMC,CAAAA,QAAQ,EAAd,EAAP,CACD,CAdQ,CAcN,CAACR,QAAD,CAdM,CAAT,CAgBA,MAAO,CAAEM,IAAI,CAAJA,IAAF,CAAP,CACD","sourcesContent":["/* eslint-disable react-hooks/exhaustive-deps */\r\n/* eslint-disable no-unused-vars */\r\nimport { useState, useEffect, useContext } from \"react\";\r\nimport { firebase } from \"../lib/firebase\";\r\n\r\nexport default function useAuthListener() {\r\n  const [user, setUser] = useState(\r\n    JSON.parse(localStorage.getItem(\"authUser\"))\r\n  );\r\n\r\n  useEffect(() => {\r\n    const listener = firebase.auth().onAuthStateChanged((authUser) => {\r\n      if (authUser) {\r\n        // we have a user...therefore we can store the user in localstorage\r\n        localStorage.setItem(\"authUser\", JSON.stringify(authUser));\r\n        setUser(authUser);\r\n      } else {\r\n        // we don't have an authUser, therefore clear the localstorage\r\n        localStorage.removeItem(\"authUser\");\r\n        setUser(null);\r\n      }\r\n    });\r\n\r\n    return () => listener();\r\n  }, [firebase]);\r\n\r\n  return { user };\r\n}\r\n"]},"metadata":{},"sourceType":"module"}